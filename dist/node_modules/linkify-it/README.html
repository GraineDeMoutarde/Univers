<h1>linkify-it</h1>
<p><a href="https://travis-ci.org/markdown-it/linkify-it"><img src="https://img.shields.io/travis/markdown-it/linkify-it/master.svg?style=flat" alt="Build Status"></a>
<a href="https://www.npmjs.org/package/linkify-it"><img src="https://img.shields.io/npm/v/linkify-it.svg?style=flat" alt="NPM version"></a>
<a href="https://coveralls.io/r/markdown-it/linkify-it?branch=master"><img src="https://img.shields.io/coveralls/markdown-it/linkify-it/master.svg?style=flat" alt="Coverage Status"></a>
<a href="https://gitter.im/markdown-it/linkify-it"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Gitter"></a></p>
<blockquote>
<p>Links recognition library with FULL unicode support.
Focused on high quality link patterns detection in plain text.</p>
</blockquote>
<p><strong><a href="http://markdown-it.github.io/linkify-it/">Demo</a></strong></p>
<p>Why it's awesome:</p>
<ul>
<li>Full unicode support, <em>with astral characters</em>!</li>
<li>International domains support.</li>
<li>Allows rules extension &amp; custom normalizers.</li>
</ul>
<h2>Install</h2>
<pre><code class="language-bash">npm install linkify-it --save
</code></pre>
<p>Browserification is also supported.</p>
<h2>Usage examples</h2>
<h5>Example 1</h5>
<pre><code class="language-js">var linkify = require('linkify-it')();

// Reload full tlds list &amp; add unofficial `.onion` domain.
linkify
  .tlds(require('tlds'))          // Reload with full tlds list
  .tlds('onion', true)            // Add unofficial `.onion` domain
  .linkify.add('git:', 'http:')   // Add `git:` ptotocol as &quot;alias&quot;
  .linkify.add('ftp:', null)      // Disable `ftp:` ptotocol
  .set({ fuzzyIP: true });        // Enable IPs in fuzzy links (without schema)

console.log(linkify.test('Site github.com!'));  // true

console.log(linkify.match('Site github.com!')); // [ {
                                                //   schema: &quot;&quot;,
                                                //   index: 5,
                                                //   lastIndex: 15,
                                                //   raw: &quot;github.com&quot;,
                                                //   text: &quot;github.com&quot;,
                                                //   url: &quot;http://github.com&quot;,
                                                // } ]
</code></pre>
<h5>Example 2. Add twitter mentions handler</h5>
<pre><code class="language-js">linkify.add('@', {
  validate: function (text, pos, self) {
    var tail = text.slice(pos);

    if (!self.re.twitter) {
      self.re.twitter =  new RegExp(
        '^([a-zA-Z0-9_]){1,15}(?!_)(?=$|' + self.re.src_ZPCc + ')'
      );
    }
    if (self.re.twitter.test(tail)) {
      // Linkifier allows punctuation chars before prefix,
      // but we additionally disable `@` (&quot;@@mention&quot; is invalid)
      if (pos &gt;= 2 &amp;&amp; tail[pos - 2] === '@') {
        return false;
      }
      return tail.match(self.re.twitter)[0].length;
    }
    return 0;
  },
  normalize: function (match) {
    match.url = 'https://twitter.com/' + match.url.replace(/^@/, '');
  }
});
</code></pre>
<h2>API</h2>
<p><strong><a href="http://markdown-it.github.io/linkify-it/doc">API documentation</a></strong></p>
<h3>new LinkifyIt(schemas, options)</h3>
<p>Creates new linkifier instance with optional additional schemas.
Can be called without <code>new</code> keyword for convenience.</p>
<p>By default understands:</p>
<ul>
<li><code>http(s)://...</code> , <code>ftp://...</code>, <code>mailto:...</code> &amp; <code>//...</code> links</li>
<li>&quot;fuzzy&quot; links and emails (google.com, foo@bar.com).</li>
</ul>
<p><code>schemas</code> is an object, where each key/value describes protocol/rule:</p>
<ul>
<li><strong>key</strong> - link prefix (usually, protocol name with <code>:</code> at the end, <code>skype:</code>
for example). <code>linkify-it</code> makes shure that prefix is not preceeded with
alphanumeric char.</li>
<li><strong>value</strong> - rule to check tail after link prefix
<ul>
<li><em>String</em> - just alias to existing rule</li>
<li><em>Object</em>
<ul>
<li><em>validate</em> - validator function (should return matched length on success),
or <code>RegExp</code>.</li>
<li><em>normalize</em> - optional function to normalize text &amp; url of matched result
(for example, for twitter mentions).</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>options</code>:</p>
<ul>
<li><strong>fuzzyLink</strong> - recognige URL-s without <code>http(s)://</code> head. Default <code>true</code>.</li>
<li><strong>fuzzyIP</strong> - allow IPs in fuzzy links above. Can conflict with some texts
like version numbers. Default <code>false</code>.</li>
<li><strong>fuzzyEmail</strong> - recognize emails without <code>mailto:</code> prefix. Default <code>true</code>.</li>
</ul>
<h3>.test(text)</h3>
<p>Searches linkifiable pattern and returns <code>true</code> on success or <code>false</code> on fail.</p>
<h3>.pretest(text)</h3>
<p>Quick check if link MAY BE can exist. Can be used to optimize more expensive
<code>.test()</code> calls. Return <code>false</code> if link can not be found, <code>true</code> - if <code>.test()</code>
call needed to know exactly.</p>
<h3>.testSchemaAt(text, name, offset)</h3>
<p>Similar to <code>.test()</code> but checks only specific protocol tail exactly at given
position. Returns length of found pattern (0 on fail).</p>
<h3>.match(text)</h3>
<p>Returns <code>Array</code> of found link matches or null if nothing found.</p>
<p>Each match has:</p>
<ul>
<li><strong>schema</strong> - link schema, can be empty for fuzzy links, or <code>//</code> for
protocol-neutral  links.</li>
<li><strong>index</strong> - offset of matched text</li>
<li><strong>lastIndex</strong> - index of next char after mathch end</li>
<li><strong>raw</strong> - matched text</li>
<li><strong>text</strong> - normalized text</li>
<li><strong>url</strong> - link, generated from matched text</li>
</ul>
<h3>.tlds(list[, keepOld])</h3>
<p>Load (or merge) new tlds list. Those are needed for fuzzy links (without schema)
to avoid false positives. By default:</p>
<ul>
<li>2-letter root zones are ok.</li>
<li>biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф are ok.</li>
<li>encoded (<code>xn--...</code>) root zones are ok.</li>
</ul>
<p>If that's not enougth, you can reload defaults with more detailed zones list.</p>
<h3>.add(schema, definition)</h3>
<p>Add new rule with <code>schema</code> prefix. For definition details see constructor
description. To disable existing rule use <code>.add(name, null)</code></p>
<h3>.set(options)</h3>
<p>Override default options. Missed properties will not be changed.</p>
<h2>License</h2>
<p><a href="https://github.com/markdown-it/linkify-it/blob/master/LICENSE">MIT</a></p>
